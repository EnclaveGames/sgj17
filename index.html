<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <title>Flood Esc Ape</title>
  <script src="js/aframe-v0.6.0.min.js"></script>
  <script src="./js/change-color-on-hover"></script>
</head>
<body>
  <a-scene>
    <a-plane position="0 0 0" rotation="-90 0 0" width="16" height="16" color="#999"></a-plane>
    <a-sky color="#DDDDDD"></a-sky>
    <!-- <a-light type="directional" color="#FFF" intensity="0.5" position="-1 1 2"></a-light> -->
    <!-- <a-light type="ambient" color="#FFF"></a-light> -->
    <a-camera position="0 0 0">
      <a-entity id="cursor" cursor="fuse: true; fuseTimeout: 2500"
          position="0 0 -1"
          geometry="primitive: ring; radiusInner: 0.06; radiusOuter: 0.08"
          material="color: black; shader: flat">
</a-entity>
    </a-camera>

    <a-assets>
      <a-mixin id="light" geometry="primitive: sphere; radius: 0.1"
               material="color: #FFF; shader: flat"
               light="color: #DDDDFF; distance: 50; intensity: 0.8; type: point">
      </a-mixin>
      <a-mixin id="torus-knot" geometry="primitive: torusKnot"
               material="color: red"></a-mixin>
    </a-assets>

    <a-box color="#0095DD" rotation="0 0 0" position="0 4.5 -6" width="4" depth="0.1" height="1">
      <a-text id="timer" color="#EEE" position="0 0.15 0.1" font="mozillavr" value="Time left to drown: 00:10" align="center" width="4"></a-text>
    </a-box>

    <a-box id="wall1" src="img/wall-left.jpg" position="-8 2.5 0" width="16" depth="0.1" height="5" rotation="0 90 0"></a-box>
    <a-box id="door1" class="door" color="#00559D" position="-7.9 2.2 0" width="3" depth="0.1" height="4" rotation="0 90 0"></a-box>
    <a-entity class="light" id="light1" mixin="light" position="-7 4.9 0"></a-entity>

    <a-box id="wall2" src="img/wall-center.jpg" position="0 2.5 -8" width="16" depth="0.1" height="5"></a-box>
    <a-box id="door2" class="door" color="#00559D" position="0 2.2 -7.9" width="3" depth="0.1" height="4"></a-box>
    <a-entity class="light" id="light2" mixin="light" position="0 4.9 -7"></a-entity>

    <a-box position="-3 2.5 -7.9" src="img/box.png" width="1" height="1" depth="0.1"></a-box>

    <a-box id="wall3" src="img/wall-right.jpg" position="8 2.5 0" width="16" depth="0.1" height="5" rotation="0 -90 0"></a-box>
    <a-box id="door3" class="door" color="#00559D" position="7.9 2.2 0" width="3" depth="0.1" height="4" rotation="0 -90 0"></a-box>
    <a-entity class="light" id="light3" mixin="light" position="7 4.9 0"></a-entity>

    <a-box id="wall4" src="img/rollups.jpg" position="0 2.5 8" width="16" depth="0.1" height="5"></a-box>

    <a-box id="floor" src="img/floor.jpg" position="0 0 0" width="16" depth="0.1" height="16" rotation="90 -90 0"></a-box>

    <a-box id="roof" src="img/floor.jpg" position="0 5 0" width="16" depth="0.1" height="16" rotation="90 -90 0"></a-box>

    <a-box id="overlay" color="#000" position="0 2.5 -1" width="16" height="5" depth="1">
      <a-animation attribute="opacity" dur="1000" delay="2000" easing="linear" from="1" to="0"></a-animation>
    </a-box>

  </a-scene>
  <script src="./js/setup.js" charset="utf-8"></script>
  <script>
    var camera = document.querySelector('a-camera');
    setupRuns('./img/example-run', 3)
    setupTimer(`10`);
    function render() {
      requestAnimationFrame(render);
    }
    render();

    // document.querySelector('#overlay').emit('fade');

// var start = true;
// var stopIn = 5000;
// var stopTime = 0;
// var stop = false;
// var timeTillStop = 0;
// var secondsCount = Math.floor(stopIn/1000);

// function update(timer){
//     if(start){
//         stopTime = timer+stopIn;
//         start = false;
//     } else {
//         if(timer >= stopTime){
//             stop = true;
//         }
//     }
//     timeTillStop = stopTime-timer;
//     console.log(Math.floor(timeTillStop/1000));

//     // if(secondsCount > Math.floor(stopIn/1000)) {
//     //   secondsCount--;
//     //   console.log('SECONDS LEFT: '+Math.floor(timeTillStop/1000));
//     // }

//     if(!stop){
//         requestAnimationFrame(update);
//     }
// }
// requestAnimationFrame(update);

  </script>
</body>
</html>
